<html>
<head>

<style type="text/css">
table.center {
	width: 900px;
	margin-left: auto;
	margin-right: auto;
}

td.basecell {
	width: 450px;
}

div.tile {
	padding-top: 20px;
	padding-bottom: 40px;
	text-align: center;
}
</style>

</head>
<body>
	<div style="text-align: center;">
		<h1 id="top"><?php echo $_SERVER['REQUEST_URI']; ?></h1>
		<a href="../">zum Ã¼bergeordneten Ordner</a><br /> <br />
		<table class="center">
<?php
// dateiendungen bestimmen

$erlaubtebilddateiendungen = array (
		"jpg",
		"jpeg",
		"bmp",
		"png",
		"gif" 
);
$erlaubtevideodateiendungen = array (
		"mp4",
		"mov" 
);
$anzuzeigendedateien = array ();

// Dateien bestimmen
$alledateien = scandir ( getcwd () ); //aktuellen Ordner auslesen

foreach ( $alledateien as $datei ) { // Selektionsschleife

	$info = pathinfo ( $datei ); //Infos holen
	$dateiendung = strtolower( $info ['extension'] );	
	if (in_array ( $dateiendung , $erlaubtebilddateiendungen )) {
		$typ [$datei] = 'pic';
		array_push ( $anzuzeigendedateien, $datei );
	} elseif (in_array ( $dateiendung , $erlaubtevideodateiendungen )) {
		$typ [$datei] = 'vid';
		array_push ( $anzuzeigendedateien, $datei );
	}
}

foreach ( $anzuzeigendedateien as $index => $datei ) { // Ausgabeschleife
	if ($index % 2 == 0)
		echo '<tr>';//Zeilenanfang schreiben
	
	if (strcasecmp ( $typ [$datei], 'pic' ) == 0) {
		echo '<td class="basecell"><div class="tile"><a href="' . $datei . '" ><img src="thumbnails/' . $datei . '"></a><br />';
		echo $datei . "</div></td>"; // Ausgabe Einzeldatei
	} else {
		echo '<td class="basecell"><div class="tile"><video src="http://global:sensibel@home.bytheweb.de'.$_SERVER['REQUEST_URI'].'/'.$datei . '" width="400" poster="thumbnails/'.$datei.'.jpg" controls></video><br />';
		echo $datei . "</div></td>"; // Ausgabe Einzeldatei
	}
	
	if ($index + 1 == count ( $anzuzeigendedateien )) {
		echo '<td><br /></td></tr>';//Zeilenende bei einer ungerade Zahl von Dateien
	} elseif ($index % 2 == 1)
		echo '</tr>';//normales Zeilenende schreiben
}

?>

</table>
		<a href="#top">nach oben</a>
	</div>
</body>
